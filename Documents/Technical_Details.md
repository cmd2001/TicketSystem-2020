# 实现技术细节

### B+树（含缓存）

两种节点，左自右开，`0-base`，不同使用序列。

双`map`实现`LRU`算法，读写缓存共用一个`map`，注意标记合并。

`range`函数：两次查询，归并排序。

### 后端

`query_ticket`：查询过两站的列车，双指针滑动找对应。注意列车不能倒开。

`query_transfer`：查询过两站的列车，枚举起始站列车，查询信息，找中间站，查询过中间站列车，与终点站双指针对比。

`queue`：~~B+树模拟队列~~，列车的`runtimeID(TrainID+Date)`和用户购票`ID`作为`key`，避免循环不必要候补。

### 前端

基于MDUI，所有静态文件存储于`https://cdn.yukisaki.io:2333/mdui`

奇怪的打表与模板化系统。（甚至只有4个`html`）